<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <link rel="STYLESHEET" href="../../styles/carnot.css" charset="ISO-8859-1" type="text/css">
  <title>Creating the Model and Organizational Structure</title>
<script language="JavaScript" src="../../styles/naviLine.js" type="text/javascript"></script>  
</head>
<body>
<script language="JavaScript">
<!--
	writeNavigation("Creating the Users and Departments in the Stardust Portal","../../toc.html",
	        "","rep-tut-portal.html",
			
			"../tut-preface.htm","Tutorials",
			"tut-scoped-main.html","Scoped Participants Tutorials",
			"rep-tut-preface.html","Using Declarative Security in Report Viewing");
 -->
</script>

<h1>Creating the Model and Organizational Structure</h1>
<p>In a dynamic Web project, create a new model by choosing
<strong>File &gt; New &gt; Other &gt; Process Manager Wizards &gt; Process Model</strong>
in the main menu. Rename the default process definition to 
<strong>Report Demo</strong>.</p>
<p>For detailed information on creating dynamic Web projects
for usage with the Stardust Portal,
please refer to the <a href="PLUGINS_ROOT/org.eclipse.stardust.docs.wst/html/wst-integration/toc.html">
Rapid Application Development</a> guide.</p>
<p>Continue with the following:</p>
<ul>
	<li><a href="#workflow">Creating the Workflow</a></li>
	<li><a href="#data">Creating and Binding the Department Data</a></li>
	<li><a href="#orgstruct">Creating the Organizational Structure</a></li>
	<li><a href="#performers">Assigning the Performers</a></li>
	<li><a href="#grants">Setting Authorization for Reading Activity Instance Data</a></li>
</ul>
<h2 id="workflow">Creating the Workflow</h2>
<p>Open the diagram of the <strong>Report Demo</strong> process definition. Create a manual trigger
and two subsequent activities. Name the activities <strong>Enter Department</strong>
and <strong>Activity by Scoped NationalDirector</strong> as demonstrated in the following 
screenshot:</p>
<p class ="image"><img src="images/rep-model-workflow.png" 
	alt=""><br>
<strong>Figure:</strong> Reporting Use Case Example Workflow</p>
<h2 id="data">Creating the Department Data</h2>
<p>Create the primitive data <strong>Nation Department</strong>, 
which will be used as data path for the department defined for 
the organizations.</p>

<p>Assign this data as In- and Out-data mapping
to the activity <strong>Enter Department</strong>. 
Thus, the different department values are determined via this activity.</p>
<p class="image"><img src="images/rep-model-data.png"
    alt="Diagram with Data" /> <br>
<strong>Figure:</strong> Adding Department Primitive Data</p>
<p>For information on
how to create data and data mapping, please refer to the chapter
<a href="../../handbooks/modelling/mg-defdesk-7.htm">Specifying Data</a> and
<a href="../../handbooks/modelling/mg-defdesk-8.htm">Specifying Data Mappings</a> of the 
<a href="../../handbooks/modelling/mg-preface.htm">Modeling Guide</a> accordingly.</p>
<h3>Binding the Department Data</h3>
<p>Now bind the department data to the organization <strong>NationDivision</strong>:</p>
<ol>
	<li>Open the properties page of the <strong>NationDivision</strong>
		organization.</li>
	<li>Select <strong>Department Binding</strong>.</li>
	<li>Enable the checkbox for <strong>Organization support departments</strong>.</li>
	<li>In the <strong>Department Id</strong> section, select the data
		<strong>Nation Department</strong> in the <strong>Data</strong> drop-down list.</li>
	<li>Click <strong>OK</strong>.</li>
</ol>
<p class="image"><img src="images/rep-set-department-data.png"
    alt="Department Settings" /> <br>
<strong>Figure:</strong> Department Settings for NationDivision</p>

<h2 id="orgstruct">Creating the Organizational Structure</h2>
<p>In the default diagram, create two organizations, <strong>HeadOffice</strong>
and <strong>NationalDivision</strong>. Assign the <strong>NationalDivision</strong>
organization as suborganization of <strong>HeadOffice</strong>. Create a role
<strong>NationalDirector</strong> and connect it with a <strong>Manager Of</strong>
connection to <strong>NationalDivision</strong>.</p>
<p class="image"><img src="images/rep-model-org-diagram.png"
    alt="Organizational Structure" /> <br>
<strong>Figure:</strong> Organizational Structure</p>
<p>For information on creating and assigning organizations, please refer
 to the chapter <a href="../support-case/tut-main-8.htm">Defining Roles and Organizations</a>
of the <a href="../support-case/support-case-preface.htm">Support Case Example</a> tutorial.</p>
<h2 id="performers">Assigning the Performers</h2>
<p>Set the following performers:</p>
<ol>
	<li>Assign the <strong>Administrator</strong> role as participant to 
the manual trigger.</li>
	<li>Assign <strong>HeadOffice</strong> as performer of <strong>Enter Department</strong>.</li>
	<li>Assign <strong>NationalDirector</strong> as performer of 
	<strong>Activity by Scoped NationalDirector</strong>.</li>
</ol>
<p>Now the model should look like in the following diagram
screenshot:</p>
<p class ="image"><img src="images/rep-model-diagram.png" 
	alt="diagram"><br>
<strong>Figure:</strong> Reporting Use Case Example Diagram</p>
<h2 id="grants">Setting Authorization for Reading Activity Instance Data</h2>
<p>Now change the default authorization set for the grant
<strong>Reading Activity Instance Data</strong>:</p>
<ol>
	<li>Open the property page of the activity 
	<strong>Activity by Scoped NationalDirector</strong>.</li>
	<li>On the left side of the pane select the <strong>Authorization</strong>
	entry.</li>
	<li>In the <strong>Permission</strong> part, select
	<strong>Reading Activity Instance Data</strong>.</li>
	<li>In the <strong>Participant</strong> part:
	<ul>
		<li>Deselect <strong>All</strong>.</li>
		<li>Select <strong>NationalDirector</strong>.</li>
	</ul>
	Please note, that <strong>Owner</strong> always remains selected.</li>
</ol>
<p class ="image"><img src="images/rep-set-security.png" 
	alt="diagram"><br>
<strong>Figure:</strong> Setting the Authorization</p>

<script language="JavaScript">
<!-- 
writeFooter(); 
-->
</script>
</body>
</html>
